<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.safetyplatform.dao.HRLevelNumDao">
    <!--目的:为dao接口方法提供sql语句配置
    即针对dao接口中的方法编写我们的sql语句-->




    <select id="queryEnterHiddenRiskNum" resultType="com.safetyplatform.entity.risk_index.RiskEvaluateResult">
        SELECT danger_level_num, count(*) as result
        FROM enter_hidden_relation ehr ,zyjk
        where ehr.risk_id = zyjk.risk_id and ehr.enter_id = #{enterId}
        group by danger_level_num order by danger_level_num asc;
    </select>

    <select id="queryEHRNoCorrectNum" resultType="com.safetyplatform.entity.risk_index.RiskEvaluateResult">
        SELECT danger_level_num,count(*) as result
        FROM enter_hidden_relation ehr ,zyjk
        where ehr.risk_id = zyjk.risk_id and ehr.enter_id = #{enterId} and ehr.status = 1
        group by danger_level_num order by danger_level_num asc;
    </select>


    <resultMap id="getEnterHRNumResult" type="HashMap">
        <result property="key" column="danger_level_num" javaType="java.lang.Integer" jdbcType="INTEGER"/>
        <result property="value" column="mynum" javaType="java.lang.Integer" jdbcType="INTEGER"/>

    </resultMap>

</mapper>